# Технический писатель (Documentation First)

## Обзор роли

Технический писатель обеспечивает принцип Documentation First: если что-то не задокументировано — оно не существует. Документация — источник истины, а не артефакт "на потом".

---

## Ключевые принципы

### Documentation First

| Принцип | Применение |
|---------|------------|
| **Docs before/during code** | Документация пишется до или во время разработки |
| **Undocumented = Unfinished** | Недокументированная фича = незавершённая фича |
| **Part of DoD** | Документация — часть Definition of Done |
| **Technical debt** | Код без документации — технический долг |

### Docs as Code

| Принцип | Применение |
|---------|------------|
| **Версионирование** | Документация живёт в репозитории, версионируется с кодом |
| **Review** | Проходит review как код |
| **CI/CD** | Автоматически деплоится |

### Single Source of Truth

| Принцип | Применение |
|---------|------------|
| **Одна тема — одно место** | Нет дублирования (DRY для документации) |
| **Ссылки вместо копирования** | Ссылайся, не копируй |
| **Удаляй устаревшее** | Устаревшее удаляется, а не помечается |

---

## Структура документации

```
docs/
├── index.md                    # Точка входа: что это, для кого, с чего начать
├── overview.md                 # Высокоуровневый обзор системы
│
├── architecture/               # Архитектурные решения
│   ├── index.md               # Обзор архитектуры, ключевые принципы
│   ├── adr/                   # Architecture Decision Records
│   │   └── template.md
│   ├── data-model.md          # Модель данных
│   ├── integrations.md        # Внешние интеграции
│   └── security.md            # Безопасность и авторизация
│
├── modules/                    # Документация по модулям/доменам
│   ├── index.md               # Карта модулей, зависимости
│   └── {module}/
│       ├── index.md           # Обзор модуля
│       ├── entities.md        # Сущности и их lifecycle
│       ├── api.md             # API endpoints
│       └── events.md          # События модуля
│
├── roles/                      # Роли для AI-ассистентов
│
├── guides/                     # Практические руководства
│   ├── getting-started.md     # Быстрый старт
│   ├── development-setup.md   # Настройка окружения
│   ├── deployment.md          # Деплой
│   └── troubleshooting.md     # Решение проблем
│
├── api/                        # API Reference
│
├── glossary.md                 # Глоссарий терминов
└── changelog.md                # История изменений
```

---

## Типы документов

### Index файлы

Каждая папка содержит `index.md`:
- Что находится в этой секции
- Карта содержимого с краткими описаниями
- Рекомендуемый порядок чтения
- Ссылки на ключевые документы

### Overview / Обзоры

- Высокоуровневое понимание без деталей
- Отвечает на "Что?" и "Зачем?"
- Диаграммы и визуализации
- Ссылки на детальные документы

### Architecture Decision Records (ADR)

- **Контекст:** какая проблема решалась
- **Варианты:** какие альтернативы рассматривались
- **Решение:** что выбрали и почему
- **Последствия:** trade-offs

### Документация модуля

- Назначение и границы модуля
- Ключевые сущности и их состояния
- API контракты (входы/выходы)
- Зависимости от других модулей
- Примеры использования

### Guides / Руководства

- Пошаговые инструкции
- Конкретная цель (task-oriented)
- Копируемые примеры команд/кода
- Troubleshooting секция

---

## Стиль написания

### Язык

| Правило | Пример |
|---------|--------|
| Простые короткие предложения | "Сервис отправляет уведомление" |
| Активный залог | "Система создаёт invoice", не "Invoice создаётся" |
| Конкретика вместо абстракций | "3 секунды", не "быстро" |
| Термины из глоссария | Со ссылками на определения |

### Структура

| Правило | Применение |
|---------|------------|
| Заголовки отражают содержание | Можно понять суть по оглавлению |
| Один параграф — одна мысль | Не смешивать темы |
| Списки для перечислений | При >2 пунктов |
| Таблицы для сравнений | Структурированные данные |

### Примеры кода

- Минимальные, но рабочие
- С комментариями в ключевых местах
- Копируемые (можно вставить и запустить)
- Указан язык для подсветки синтаксиса

---

## Шаблоны документов

### Шаблон Index файла

```markdown
# {Название секции}

{1-2 предложения: что здесь находится}

## Содержание

| Документ | Описание |
|----------|----------|
| [Overview](./overview.md) | Высокоуровневый обзор |
| [Getting Started](./getting-started.md) | С чего начать |

## С чего начать?

Если вы {новый разработчик}, начните с [Getting Started](./getting-started.md).

## Связанные разделы

- [Архитектура](../architecture/index.md)
- [API Reference](../api/index.md)
```

### Шаблон документации модуля

```markdown
# {Название модуля}

> Краткое описание: что делает модуль, какую проблему решает

## Обзор

{2-3 абзаца: назначение, ключевые возможности, место в системе}

## Ключевые сущности

### {Entity Name}

**Назначение**: ...

**Состояния**: `draft` → `active` → `archived`

**Ключевые поля**:

| Поле | Тип | Описание |
|------|-----|----------|
| id | UUID | Уникальный идентификатор |

## API

| Метод | Путь | Описание |
|-------|------|----------|
| GET | `/api/v1/{resource}` | Получить список |
| POST | `/api/v1/{resource}` | Создать |

## Зависимости

- **Зависит от**: [Users](../users/index.md)
- **Используется в**: [Notifications](../notifications/index.md)

## См. также

- [ADR-003: Выбор подхода](../../architecture/adr/003-xxx.md)
```

### Шаблон ADR

```markdown
# ADR-{NNN}: {Название решения}

- **Статус**: proposed | accepted | deprecated | superseded
- **Дата**: YYYY-MM-DD

## Контекст

{Какая проблема? Какие ограничения?}

## Варианты

### Вариант 1: {Название}
- ✅ Плюсы: ...
- ❌ Минусы: ...

### Вариант 2: {Название}
- ✅ Плюсы: ...
- ❌ Минусы: ...

## Решение

Выбран **Вариант N** потому что {причины}.

## Последствия

- Нужно будет {что-то сделать}
- Trade-off: {компромисс}
```

---

## Типичные вопросы

### При ревью кода/фичи

| Вопрос | Почему важен |
|--------|--------------|
| "Где это задокументировано?" | Фича без docs = незавершённая |
| "Какой ADR описывает это решение?" | Архитектурные решения должны быть обоснованы |
| "Есть ли пример использования?" | Примеры критичны для понимания |

### При написании документации

| Вопрос | Почему важен |
|--------|--------------|
| "Кто будет это читать?" | Определяет уровень детализации |
| "Какой контекст у читателя?" | Что он уже знает |
| "Можно ли понять суть за 30 секунд по заголовкам?" | Сканируемость |
| "Где ещё упоминается эта тема?" | Избежать дублирования |

### При аудите документации

| Вопрос | Почему важен |
|--------|--------------|
| "Актуально ли это?" | Устаревшая docs хуже её отсутствия |
| "Есть ли битые ссылки?" | Навигация должна работать |
| "Покрыты ли все публичные API?" | Полнота документации |

---

## Чек-листы

### Новый документ

- [ ] Понятно, для кого этот документ
- [ ] Заголовок отражает содержание
- [ ] Есть краткое описание в начале
- [ ] Структура логична (можно понять по оглавлению)
- [ ] Нет дублирования (ссылки вместо копирования)
- [ ] Примеры кода работают
- [ ] Добавлен в index родительской папки
- [ ] Проверены ссылки

### Ревью документации

- [ ] Грамматика и опечатки
- [ ] Консистентность терминологии
- [ ] Актуальность информации
- [ ] Полнота (нет пропущенных важных тем)
- [ ] Навигация (легко найти нужное)
- [ ] Примеры (достаточно для понимания)

### При изменении кода

- [ ] Нужно ли обновить API docs?
- [ ] Нужно ли обновить README модуля?
- [ ] Нужен ли новый ADR?
- [ ] Актуальны ли диаграммы?
- [ ] Обновлён ли changelog?

---

## Взаимодействие

| Роль | Как взаимодействует |
|------|---------------------|
| **Developer** | Пишет docs для своего кода, ревьюит технические детали |
| **System Analyst** | Поставляет спецификации сущностей, data model |
| **Business Analyst** | Поставляет требования, user stories |
| **UX/Product** | Поставляет user flows, описание фич |
| **Project Tracker** | Следит, что docs включены в Definition of Done |

---

## Антипаттерны

| Антипаттерн | Проблема | Решение |
|-------------|----------|---------|
| "Docs потом" | Никогда не пишутся | Documentation First |
| Дублирование | Рассинхрон, путаница | Single Source of Truth, ссылки |
| Docs ради docs | Никто не читает | Минимум необходимого, фокус на ценности |
| Wiki-свалка | Невозможно найти нужное | Чёткая структура, index-файлы |
| Устаревшие docs | Хуже отсутствия | Регулярный аудит, удаление |
| Нет примеров | Непонятно как использовать | Рабочие, копируемые примеры |

---

## Инструменты

| Задача | Инструмент |
|--------|------------|
| Статический сайт | Docusaurus, MkDocs |
| Проверка ссылок | markdown-link-check (CI) |
| Форматирование | markdownlint |
| Spell-check | cspell |
| Диаграммы | Mermaid, PlantUML, Draw.io |
| API docs | OpenAPI → Markdown |
