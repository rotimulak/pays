# E11.3 ‚Äî Bot Menu Simplification

## –û–ø–∏—Å–∞–Ω–∏–µ

–£–ø—Ä–æ—â–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –±–æ—Ç–∞ –¥–æ 2 –∫–Ω–æ–ø–æ–∫, —É–¥–∞–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–æ–≤.

---

## Tasks

### T11.3.1 ‚Äî Update start handler

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å handler `/start` –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ –º–µ–Ω—é.

**–§–∞–π–ª:** `backend/src/bot/handlers/start.py`

**–ö–æ–¥:**
```python
from aiogram import Router
from aiogram.types import Message
from aiogram.filters import CommandStart

from src.bot.keyboards.main_menu import get_main_menu_keyboard

router = Router()

@router.message(CommandStart())
async def cmd_start(message: Message):
    """–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é."""
    await message.answer(
        "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=get_main_menu_keyboard()
    )
```

**DoD:**
- [ ] Handler –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
- [ ] –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–∞–∫–æ–Ω–∏—á–Ω–æ–µ

---

### T11.3.2 ‚Äî Create main menu keyboard

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.

**–§–∞–π–ª:** `backend/src/bot/keyboards/main_menu.py`

**–ö–æ–¥:**
```python
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton

def get_main_menu_keyboard() -> InlineKeyboardMarkup:
    """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: –ë–∞–ª–∞–Ω—Å –∏ –ü–æ–º–æ—â—å."""
    return InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text="üí∞ –ë–∞–ª–∞–Ω—Å", callback_data="balance")],
        [InlineKeyboardButton(text="‚ùì –ü–æ–º–æ—â—å", callback_data="help")]
    ])
```

**DoD:**
- [ ] –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞
- [ ] 2 –∫–Ω–æ–ø–∫–∏: –ë–∞–ª–∞–Ω—Å, –ü–æ–º–æ—â—å
- [ ] Callback data –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

---

### T11.3.3 ‚Äî Remove tariffs handler

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å handler –¥–ª—è `/tariffs`.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ù–∞–π—Ç–∏ —Ñ–∞–π–ª `backend/src/bot/handlers/tariffs.py`
2. –£–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
3. –£–±—Ä–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —Ä–æ—É—Ç–µ—Ä–∞ –≤ `__init__.py`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å):**
```python
@router.message(Command("tariffs"))
async def cmd_tariffs(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /tariffs –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è."""
    await message.answer(
        "‚ÑπÔ∏è –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–æ–≤ –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.\n"
        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É '–ë–∞–ª–∞–Ω—Å' –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è.",
        reply_markup=get_main_menu_keyboard()
    )
```

**DoD:**
- [ ] Handler —É–¥–∞–ª—ë–Ω –∏–ª–∏ –≤—ã–¥–∞—ë—Ç redirect
- [ ] –†–æ—É—Ç–µ—Ä —É–±—Ä–∞–Ω –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ —É–¥–∞–ª—ë–Ω)

---

### T11.3.4 ‚Äî Update help handler

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–º–æ—â—å —Å –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏.

**–§–∞–π–ª:** `backend/src/bot/handlers/help.py` –∏–ª–∏ callback –≤ start.py

**–ö–æ–¥:**
```python
@router.callback_query(F.data == "help")
async def on_help(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É."""
    help_text = """
‚ùì **–ü–æ–º–æ—â—å**

üí∞ **–ë–∞–ª–∞–Ω—Å** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∏ —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏

üìã **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å (–º–∏–Ω–∏–º—É–º 200‚ÇΩ)
2. –ü–µ—Ä–≤—ã–π –ø–ª–∞—Ç—ë–∂ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É
3. –¢–æ–∫–µ–Ω—ã —Ä–∞—Å—Ö–æ–¥—É—é—Ç—Å—è –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
4. –ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

üìû **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** @support_username
    """
    await callback.message.edit_text(
        help_text,
        parse_mode="Markdown",
        reply_markup=InlineKeyboardMarkup(inline_keyboard=[
            [InlineKeyboardButton(text="‚óÄÔ∏è –ù–∞–∑–∞–¥", callback_data="main_menu")]
        ])
    )
    await callback.answer()
```

**DoD:**
- [ ] –ü–æ–º–æ—â—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –û–±—ä—è—Å–Ω—è–µ—Ç –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å –æ–ø–ª–∞—Ç—ã
- [ ] –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
